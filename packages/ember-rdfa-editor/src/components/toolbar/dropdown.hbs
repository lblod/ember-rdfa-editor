{{! @glint-nocheck: not typesafe yet }}
<div class="say-dropdown" ...attributes>
  <this.Velcro @placement="bottom-start" @strategy="absolute" as |velcro|>
    <button
      {{this.reference}}
      class="say-dropdown__button {{if this.dropdownOpen 'is-active' ''}}"
      title={{@title}}
      aria-haspopup="true"
      aria-expanded="{{if this.dropdownOpen 'true' 'false'}}"
      type="button"
      {{on "click" this.toggleDropdown}}
      disabled={{@disabled}}
      {{velcro.hook}}
    >
      {{#unless @hideLabel}}
        <span class="say-dropdown__label">{{@label}}</span>
      {{/unless}}
      {{#if @icon}}
        <AuIcon @icon={{@icon}} @ariaHidden={{true}} @size="large" />
      {{/if}}
    </button>
    {{#if this.dropdownOpen}}
      <div
        {{focus-trap
          shouldSelfFocus=true
          focusTrapOptions=(hash
            clickOutsideDeactivates=this.clickOutsideDeactivates
          )
        }}
        class="say-dropdown__menu is-visible
          {{if this.isHorizontal 'say-dropdown__menu-horizontal'}}"
        role="menu"
        tabindex="-1"
        {{velcro.loop}}
      >
        {{yield
          (hash
            Item=(component
              "toolbar/dropdown-item" onActivate=this.closeDropdown
            )
            closeDropdown=this.closeDropdown
          )
        }}
      </div>
    {{/if}}
  </this.Velcro>
</div>